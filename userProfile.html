<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>userProfile</title>
    <link rel="stylesheet" href="./css/userProfile.css">
    <!-- font awesome link -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css"
        integrity="sha512-5Hs3dF2AEPkpNAR7UiOHba+lRSJNeM2ECkwxUIxC1Q/FLycGTbNapWXB4tP889k5T5Ju8fs4b1P5z/iB4nMfSQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
   </head>

<body>
    <section id="userprofile">
        <div class="header">
            <div class="poster">
                <div class="profilePic">
<!--                     <img id="profilePicture" src="./assets/images/971.jpg" alt=""> -->
                    <img id="profilePicture" src="https://loremflickr.com/200/200?random=3" alt="">
                </div>
            </div>
            <div class="names">
                <div class="userId">StormShadow@007</div>
                <div class="userName">Unkown User</div>
            </div>
            <div class="activity">
                <span>followers</span>
                <span>following</span>
                <span>posts</span>
                <span>100K</span>
                <span>67</span>
                <span>320</span>
            </div>
        </div>
    </section>
    <div class="posts">
            <img class="story" id="userPost" src="https://loremflickr.com/300/200?random=3" alt="">
            <img class="story" id="userPost" src="https://loremflickr.com/300/200?random=13" alt="">
            <img class="story" id="userPost" src="https://loremflickr.com/300/200?random=31" alt="">
            <img class="story" id="userPost" src="https://loremflickr.com/300/200?random=97" alt="">
            <img class="story" id="userPost" src="https://loremflickr.com/300/200?random=67" alt="">
            <img class="story" id="userPost" src="https://loremflickr.com/300/200?random=51" alt="">
            <img class="story" id="userPost" src="https://loremflickr.com/300/200?random=91" alt="">
            <img class="story" id="userPost" src="https://loremflickr.com/300/200?random=541" alt="">
            <img class="story" id="userPost" src="https://loremflickr.com/300/200?random=512" alt="">
            <img class="story" id="userPost" src="https://loremflickr.com/300/200?random=451" alt="">
            <img class="story" id="userPost" src="https://loremflickr.com/300/200?random=891" alt="">
            <img class="story" id="userPost" src="https://loremflickr.com/300/200?random=191" alt="">
            <img class="story" id="userPost" src="https://loremflickr.com/300/200?random=391" alt="">
            <img class="story" id="userPost" src="https://loremflickr.com/300/200?random=791" alt="">
            <img class="story" id="userPost" src="https://loremflickr.com/300/200?random=991" alt="">
            <img class="story" id="userPost" src="https://loremflickr.com/300/200?random=81" alt="">
            <img class="story" id="userPost" src="https://loremflickr.com/300/200?random=789" alt="">
    </div>
    <section id="footSection">
        <div class="footNavigation">
            <a href="index.html">
                <i class="fa-solid fa-house"></i></a>
            <i class="fa-solid fa-upload"></i>
            <i class="fa-solid fa-plus"></i>
            <a href="userProfile.html">
                <i class="fa-solid fa-user"></i></a>
            <a href="" id="hamburger">-x-</a>
        </div>
    </section>
    <aside>
        <div class="sidebar" id="sidebar">

            <button id="toggle-btn">x</button>
            <div class="links">
                <ul>
                    <li><a href="">Edit profile</a></li>
                    <li><a href="">Settings</a></li>
                    <li><a href="">logout</a></li>
                </ul>
            </div>
        </div>
    </aside>
</body>
<script>
    //+++++++++++++++++++++++++++++++
    const btn = document.getElementById('toggle-btn');
    const sidebar = document.getElementById('sidebar');
    const hamburger = document.getElementById('hamburger');
    sidebar.style.display = 'none';
    let isOpen = false

    btn.addEventListener('click', function () {
        sidebar.style.display = 'none';

    });

    hamburger.addEventListener('click', (e) => {
        e.preventDefault()
        e.stopPropagation()
        isOpen = !isOpen;
        sidebar.style.display = isOpen ? 'block' : 'none'
        // if (sidebar.style.display === 'none') {  
        //     sidebar.style.display = 'block'; 
        // }
    });

    //view profile picture
    const profilePicture = document.getElementById("profilePicture")
    profilePicture.addEventListener('click', () => {
        let picDiv = document.createElement('div')
        picDiv.id = 'fullView'

        //create img tag
        let picInside = document.createElement('img')
        let imgSrc2 = profilePicture.getAttribute('src')
        picInside.setAttribute('src', imgSrc2)

        picDiv.appendChild(picInside)
        document.body.appendChild(picDiv)

        //close profile pic
        picDiv.addEventListener('click', (evt) => {
            if (evt.target === picInside || evt.target === picDiv) {
                clearTimeout(picDiv)
                document.body.removeChild(picDiv)
            }
        })
    })
    //handle footer
    window.addEventListener('load', function () {
        const footNavigation = document.querySelector('.footNavigation')
        const sect = document.querySelector('.posts')
        const footNavHeight = footNavigation.offsetHeight;
        sect.style.paddingBottom = `${footNavHeight}px`;
    })

    //view post on full screen
    const userPostGallery = document.querySelectorAll('#userPost')
    //problem only one element is getting selected
    userPostGallery.forEach(full_screen_post => {
        full_screen_post.addEventListener('click', () => {
            const postDiv = document.createElement('div')
            postDiv.id = "fullImage"

            //get image
            const imageElm = document.createElement('img')
            const imgAddress = full_screen_post.getAttribute('src')
            imageElm.setAttribute('src', imgAddress)
            imageElm.setAttribute('src', imgAddress)
            imageElm.style.maxWidth = '90%';
            imageElm.style.maxHeight = '90%';
            imageElm.style.objectFit = 'contain';
            imageElm.style.borderRadius = '9px';
            //append
            document.body.appendChild(postDiv)
            postDiv.appendChild(imageElm)

            //close on click anywhere
            postDiv.addEventListener('click', (evt) => {
                if (evt.target === postDiv || evt.target === imageElm) {
                    clearTimeout(postDiv)
                    document.body.removeChild(postDiv)
                }
            })

        })
    })
</script>

</html>
